<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mobil Siaga Desa | Sendangsari, Bener, Purworejo</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#0f766e", // teal-700
            secondary: "#0d9488",
            light: "#f0fdfa",
          },
        },
      },
    };
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body class="bg-gradient-to-b from-teal-50 to-white text-gray-800">
  <!-- Header -->
  <header class="bg-primary text-white py-6 shadow-md">
    <div class="container mx-auto px-4 text-center">
      <div class="flex flex-col items-center">
        <!-- Placeholder logo desa (ganti dengan URL asli nanti) -->
        <div class="w-16 h-16 rounded-full bg-white flex items-center justify-center mb-3">
          <span class="text-primary font-bold text-xl">DS</span>
        </div>
        <h1 class="text-2xl md:text-3xl font-bold">
          Mobil Siaga Desa Sendangsari
        </h1>
        <p class="mt-1 text-teal-100 text-sm">
          Kec. Bener, Kab. Purworejo, Jawa Tengah
        </p>
        <p class="mt-2 max-w-2xl">
          Layanan transportasi darurat untuk warga Desa Sendangsari – siap
          antar pasien, logistik bencana, dan kebutuhan sosial mendesak.
        </p>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="py-10 px-4">
    <div class="container mx-auto max-w-4xl text-center">
      <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">
        Terhubung, Terlayani, Terselamatkan
      </h2>
      <p class="text-lg text-gray-600 mb-8">
        Berada di kawasan pegunungan dengan akses jalan terbatas, Desa
        Sendangsari hadir dengan solusi cepat:
        <strong>Mobil Siaga</strong> yang siap 24 jam untuk kebutuhan darurat
        warga.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
        <div class="bg-white p-5 rounded-xl shadow-lg border border-teal-100">
          <div class="text-primary text-3xl mb-3">
            <i class="fas fa-ambulance"></i>
          </div>
          <h3 class="font-bold text-lg">Antar Pasien Darurat</h3>
          <p class="text-gray-600 mt-2">
            Menuju Puskesmas Bener atau RS terdekat di Purworejo/Kebumen.
          </p>
        </div>
        <div class="bg-white p-5 rounded-xl shadow-lg border border-teal-100">
          <div class="text-primary text-3xl mb-3">
            <i class="fas fa-mountain"></i>
          </div>
          <h3 class="font-bold text-lg">Akses Wilayah Terpencil</h3>
          <p class="text-gray-600 mt-2">
            Melayani Dusun Gembong, Ngasinan, dan wilayah lereng Pegunungan
            Serayu Selatan.
          </p>
        </div>
        <div class="bg-white p-5 rounded-xl shadow-lg border border-teal-100">
          <div class="text-primary text-3xl mb-3">
            <i class="fas fa-hand-holding-heart"></i>
          </div>
          <h3 class="font-bold text-lg">Gratis untuk Warga</h3>
          <p class="text-gray-600 mt-2">
            Didukung dana desa & program pemerintah – tanpa biaya untuk
            keperluan darurat.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Cara Meminjam -->
  <section class="py-10 bg-white">
    <div class="container mx-auto px-4 max-w-6xl">
      <h2 class="text-2xl font-bold text-center mb-8 text-gray-800">
        Cara Meminjam Mobil Siaga
      </h2>

      <div class="flex flex-col md:flex-row justify-between gap-6">
        <!-- Langkah 1 -->
        <div class="flex items-start gap-4">
          <div class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg flex-shrink-0">
            1
          </div>
          <div class="text-left">
            <h3 class="font-bold text-gray-800">Daftar Akun</h3>
            <p class="text-gray-600 mt-1 text-sm">
              Isi data diri & alamat lengkap di Desa Sendangsari.
            </p>
          </div>
        </div>

        <!-- Langkah 2 -->
        <div class="flex items-start gap-4">
          <div class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg flex-shrink-0">
            2
          </div>
          <div class="text-left">
            <h3 class="font-bold text-gray-800">Ajukan Permohonan</h3>
            <p class="text-gray-600 mt-1 text-sm">
              Pilih jenis mobil & keperluan melalui website atau datang ke
              Balai Desa.
            </p>
          </div>
        </div>

        <!-- Langkah 3 -->
        <div class="flex items-start gap-4">
          <div class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg flex-shrink-0">
            3
          </div>
          <div class="text-left">
            <h3 class="font-bold text-gray-800">Tunggu Konfirmasi</h3>
            <p class="text-gray-600 mt-1 text-sm">
              Tim desa akan hubungi via WhatsApp/telepon dalam 1 jam.
            </p>
          </div>
        </div>

        <!-- Langkah 4 -->
        <div class="flex items-start gap-4">
          <div class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg flex-shrink-0">
            4
          </div>
          <div class="text-left">
            <h3 class="font-bold text-gray-800">Gunakan Mobil</h3>
            <p class="text-gray-600 mt-1 text-sm">
              Ambil kunci di Balai Desa Sendangsari (Jl. Raya Sendangsari No.
              01).
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Kontak & Lokasi -->
  <section class="py-10 bg-light">
    <div class="container mx-auto px-4 text-center max-w-3xl">
      <h2 class="text-2xl font-bold mb-6">Butuh Bantuan Sekarang?</h2>
      <p class="text-gray-700 mb-4">
        Hubungi petugas jaga Mobil Siaga Desa Sendangsari:
      </p>
      <div class="flex flex-col sm:flex-row justify-center gap-4 mb-6">
        <a href="https://wa.me/6281234567890" target="_blank" class="bg-green-600 text-white px-5 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-green-700 transition">
          <i class="fab fa-whatsapp"></i> WhatsApp Darurat
        </a>
        <a href="tel:+6281234567890" class="bg-primary text-white px-5 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-secondary transition">
          <i class="fas fa-phone-alt"></i> Telepon Langsung
        </a>
      </div>
      <p class="text-sm text-gray-600">
        Alamat: Balai Desa Sendangsari, Jl. Raya Sendangsari No. 01, Kec.
        Bener, Kab. Purworejo, Jawa Tengah 54163
      </p>
    </div>
  </section>

  @if (!Auth::check())
    <!-- Login/Register -->
    <section class="py-10 bg-gray-50">
      <div class="container mx-auto max-w-2xl px-4">
        <div class="bg-white rounded-2xl shadow-xl p-6">
          @if ($errors->any())
            <div class="mb-4 p-3 bg-red-100 text-red-700 rounded">
              <ul class="list-disc list-inside">
                @foreach ($errors->all() as $error)
                  <li>{{ $error }}</li>
                @endforeach
              </ul>
            </div>
          @endif
          <div class="flex border-b mb-5">
            <button id="btn-login" class="pb-2 px-4 font-semibold text-primary border-b-2 border-primary" onclick="showTab('login')">
              Masuk
            </button>
            <button id="btn-register" class="pb-2 px-4 font-semibold text-gray-500" onclick="showTab('register')">
              Daftar
            </button>
          </div>

          <!-- Login Form -->
          <div id="login-form">
            <h3 class="text-lg font-bold mb-3">
              Masuk sebagai Warga Sendangsari
            </h3>
            <form id="loginForm" class="space-y-3" method="POST" action="{{ route('siaga-desa.login-post') }}">
              @csrf
              <div>
                <label class="block text-gray-700 text-sm mb-1">Nomor HP</label>
                <input name="phone_number" type="tel" placeholder="081234567890" value="{{ old('phone_number') }}"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary text-sm" required />
              </div>
              <div>
                <label class="block text-gray-700 text-sm mb-1">Kata Sandi</label>
                <input name="password" type="password" placeholder="••••••••" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary text-sm"
                  required />
              </div>
              <button type="submit" class="w-full bg-primary text-white py-2 rounded-lg text-sm hover:bg-secondary transition">
                Masuk
              </button>
            </form>
            <p class="text-center text-xs text-gray-500 mt-3">
              Belum punya akun?
              <a href="#" class="text-primary font-medium" onclick="showTab('register')">Daftar di sini</a>
            </p>
          </div>

          <!-- Register Form -->
          <div id="register-form" class="hidden">
            <h3 class="text-lg font-bold mb-3">
              Daftar sebagai Warga Desa Sendangsari
            </h3>
            <form id="registerForm" class="space-y-3" method="POST" action="{{ route('siaga-desa.register') }}">
              @csrf
              <div>
                <label class="block text-gray-700 text-sm mb-1">Nama Lengkap</label>
                <input name="full_name" type="text" placeholder="Contoh: Budi Santoso"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary text-sm" required value="{{ old('full_name') }}" />
              </div>
              <div>
                <label class="block text-gray-700 text-sm mb-1">Dusun / RT-RW</label>
                <input name="dusun_rt_rw" type="text" placeholder="Contoh: Dusun Gembong, RT 02/RW 01"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary text-sm" required value="{{ old('dusun_rt_rw') }}" />
              </div>
              <div>
                <label class="block text-gray-700 text-sm mb-1">Nomor HP Aktif</label>
                <input name="phone_number_register" type="tel" placeholder="081234567890"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary text-sm" required value="{{ old('phone_number_register') }}" />
              </div>
              <div>
                <label class="block text-gray-700 text-sm mb-1">Buat Kata Sandi</label>
                <input name="password_register" type="password" placeholder="Minimal 6 karakter"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary text-sm" required />
              </div>
              <button type="submit" class="w-full bg-primary text-white py-2 rounded-lg text-sm hover:bg-secondary transition">
                Daftar Sekarang
              </button>
            </form>
            <p class="text-center text-xs text-gray-500 mt-3">
              Sudah punya akun?
              <a href="#" class="text-primary font-medium" onclick="showTab('login')">Masuk di sini</a>
            </p>
          </div>
        </div>
      </div>
    </section>
  @else
    <!-- Login/Register -->
    <section class="py-10 bg-gray-50">
      <div class="container mx-auto max-w-2xl px-4">
        <div class="bg-white rounded-2xl shadow-xl p-6">
          <div class="flex border-b mb-5">
            <button id="btn-login" class="pb-2 px-4 font-semibold text-primary border-b-2 border-primary" onclick="showTab('login')">
              Keluar
            </button>
          </div>

          <!-- Login Form -->
          <div id="login-form">
            <h3 class="text-lg font-bold mb-3">
              Keluar dari sistem
            </h3>
            <form id="logoutForm" class="space-y-3" method="POST" action="{{ route('siaga-desa.logout-post') }}">
              @csrf
              <button type="submit" class="w-full bg-primary text-white py-2 rounded-lg text-sm hover:bg-secondary transition">
                Keluar
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>
  @endif

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-6">
    <div class="container mx-auto px-4 text-center">
      <p class="font-medium">Desa Sendangsari</p>
      <p class="text-gray-400 text-sm mt-1">
        Kecamatan Bener, Kabupaten Purworejo, Jawa Tengah
      </p>
      <p class="text-gray-500 text-xs mt-3">
        © 2026 Program Mobil Siaga Desa – Dikelola oleh Pemerintah Desa
        Sendangsari
      </p>
    </div>
  </footer>

  @if (session('successMessage'))
    <input type="hidden" id="sessionSuccessMessage" value="{{ session('successMessage') }}">
  @endif

  @if (session('errorMessage'))
    <input type="hidden" id="sessionErrorMessage" value="{{ session('errorMessage') }}">
  @endif

  <script src="{{ asset('stisla/node_modules/sweetalert/dist/sweetalert.min.js') }}"></script>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

  <script>
    function showTab(tab) {
      const login = document.getElementById("login-form");
      const register = document.getElementById("register-form");
      const btnLogin = document.getElementById("btn-login");
      const btnRegister = document.getElementById("btn-register");

      if (tab === "login") {
        login.classList.remove("hidden");
        register.classList.add("hidden");
        btnLogin.classList.add("text-primary", "border-primary");
        btnLogin.classList.remove("text-gray-500");
        btnRegister.classList.add("text-gray-500");
        btnRegister.classList.remove("text-primary", "border-primary");
      } else {
        register.classList.remove("hidden");
        login.classList.add("hidden");
        btnRegister.classList.add("text-primary", "border-primary");
        btnRegister.classList.remove("text-gray-500");
        btnLogin.classList.add("text-gray-500");
        btnLogin.classList.remove("text-primary", "border-primary");
      }
    }

    document
      .getElementById("loginForm")
      .addEventListener("submit", function(e) {
        if ($('[name="phone_number"]').val().trim() === "" && $('[name="password"]').val().trim() === "") {
          alert("Nomor HP dan Kata Sandi harus diisi.");
          e.preventDefault()
        } else if ($('[name="phone_number"]').val().trim() === "") {
          alert("Nomor HP harus diisi.");
          e.preventDefault()
        } else if ($('[name="password"]').val().trim() === "") {
          alert("Kata Sandi harus diisi.");
          e.preventDefault()
        } else {}

      });

    document
      .getElementById("registerForm")
      .addEventListener("submit", function(e) {
        e.preventDefault()
        if ($('[name="full_name"]').val().trim() === "" &&
          $('[name="dusun_rt_rw"]').val().trim() === "" &&
          $('[name="phone_number_register"]').val().trim() === "" &&
          $('[name="password_register"]').val().trim() === "") {
          alert("Semua field harus diisi.");
          e.preventDefault()
        } else if ($('[name="full_name"]').val().trim() === "") {
          alert("Nama Lengkap harus diisi.");
          e.preventDefault()
        } else if ($('[name="dusun_rt_rw"]').val().trim() === "") {
          alert("Dusun / RT-RW harus diisi.");
          e.preventDefault()
        } else if ($('[name="phone_number_register"]').val().trim() === "") {
          alert("Nomor HP harus diisi.");
          e.preventDefault()
        } else if (!/^\d+$/.test($('[name="phone_number_register"]').val().trim())) {
          alert("Nomor HP harus berisi angka saja.");
          e.preventDefault()
        } else if ($('[name="password_register"]').val().trim() === "") {
          alert("Kata Sandi harus diisi.");
          e.preventDefault()
        } else {
          this.submit();
        }
      });

    $(function() {
      if ($('#sessionSuccessMessage').val()) swal('Sukses', $('#sessionSuccessMessage').val(), 'success');

      if ($('#sessionErrorMessage').val()) swal('Gagal', $('#sessionErrorMessage').val(), 'error');
    })
  </script>
</body>

</html>
